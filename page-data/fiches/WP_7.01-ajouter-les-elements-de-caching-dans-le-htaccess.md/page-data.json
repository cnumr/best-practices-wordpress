{"componentChunkName":"component---src-templates-fiches-display-js","path":"/fiches/WP_7.01-ajouter-les-elements-de-caching-dans-le-htaccess.md","result":{"data":{"markdownRemark":{"html":"<h2 id=\"sujet\" style=\"position:relative;\"><a href=\"#sujet\" aria-label=\"sujet permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Sujet</h2>\nLa fiche Utiliser un syst√®me Cache nous parle de l'importance du \n            <a class=\"tooltip\" href=\"/lexique/cache\" title=\"\">cache\n            <span class=\"bottom\">\n            <span>\n\nMoyen de sauvegarder et de rappeler rapidement les donn√©es fr√©quemment utilis√©es\n</span>\n            <i></i>\n            </span>\n            </a>\n             et de sa mise en place via des \n            <a class=\"tooltip\" href=\"/lexique/extension\" title=\"\">extensions\n            <span class=\"bottom\">\n            <span>\n\nExtension, plug-in ou module sont des fonctionnalit√©s additionnelles (non incluses dans WordPress √† l'installation) √† utiliser avec parcimonie.\n</span>\n            <i></i>\n            </span>\n            </a>\n             WordPress.\n<h2 id=\"greenit-vous-conseille\" style=\"position:relative;\"><a href=\"#greenit-vous-conseille\" aria-label=\"greenit vous conseille permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GreenIT vous conseille</h2>\n<h3 id=\"solution-code-\" style=\"position:relative;\"><a href=\"#solution-code-\" aria-label=\"solution code  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Solution code üå±üå±üå±</h3>\nNous allons directement indiquer au serveur Apache les param√©trages de \n            <a class=\"tooltip\" href=\"/lexique/compression\" title=\"\">compression\n            <span class=\"bottom\">\n            <span>\n\nLa compression est l'op√©ration informatique consistant √† transformer une suite de bits A en une suite de bits B plus courte pouvant restituer les m√™mes informations ou des informations voisines.\n</span>\n            <i></i>\n            </span>\n            </a>\n             et de contr√¥le du cache que nous souhaitons.\n<h2 id=\"exemple\" style=\"position:relative;\"><a href=\"#exemple\" aria-label=\"exemple permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Exemple</h2>\n<p>Prenons pour exemple l'image du logo qui se trouve sur chaque page du site. Si nous ne mettons pas en place de cache, le navigateur la transf√©rera depuis notre serveur √† chaque affichage d'une nouvelle page.</p>\n<p>Maintenant, compressons notre image (gzip), elle est d√©j√† plus rapide √† charger (bien s√ªr, nous partons du principe qu'elle est bien dimensionn√©e, et au bon format. cf fiches <a href=\"./WP_5.02-utiliser-le-format-adequat-d_image.md\">Utiliser une version d'image ayant taille coh√©rente avec son utilisation</a>, <a href=\"./WP_5.02-utiliser-le-format-adequat-d_image.md\">Utiliser le format ad√©quat d'image</a> et <a href=\"./WP_5.01-compresser-les-medias.md\">Compresser les m√©dias</a>.</p>\n<p>Ensuite, indiquons que nous souhaitons qu'elle soit mise en cache pendant 1 an.\nLors de sa premi√®re visite, le logo est transf√©r√© pour l'afficher dans le navigateur. Le visiteur change de page, le navigateur regarde si l'image existe d√©j√† dans ses fichiers mis en cache : oui, alors il ne va pas la chercher sur le serveur.</p>\n<blockquote>\n<p>‚ö†Ô∏è Attention, toucher au fichier .htaccess peut provoquer des erreurs, sauvegardez et testez.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"apacheconf\"><pre class=\"language-apacheconf\"><code class=\"language-apacheconf\"><span class=\"token directive-block tag\"><span class=\"token directive-block tag\"><span class=\"token punctuation\">&lt;</span>IfModule</span><span class=\"token directive-block-parameter attr-value\"> mod_expires.c</span><span class=\"token punctuation\">></span></span>\n<span class=\"token directive-inline property\">ExpiresActive</span> On\n<span class=\"token directive-inline property\">ExpiresDefault</span> <span class=\"token string\">\"access plus 1 month\"</span>\n<span class=\"token comment\">#D√©lai de cache des fonts</span>\n<span class=\"token directive-inline property\">ExpiresByType</span> application/x-font-ttf <span class=\"token string\">\"access plus 1 month\"</span>\n[...]\n<span class=\"token comment\">#D√©lai de cache des Images</span>\n<span class=\"token directive-inline property\">ExpiresByType</span> image/jpg <span class=\"token string\">\"access plus 1 month\"</span>\n[...]\n<span class=\"token comment\">#D√©lai de cache des Autres m√©dias</span>\n<span class=\"token directive-inline property\">ExpiresByType</span> video/ogg <span class=\"token string\">\"access plus 1 month\"</span>\n[...]\n<span class=\"token comment\">#D√©lai de cache des Assets</span>\n<span class=\"token directive-inline property\">ExpiresByType</span> text/css <span class=\"token string\">\"access plus 6 month\"</span>\n<span class=\"token directive-inline property\">ExpiresByType</span> application/javascript <span class=\"token string\">\"access plus 6 month\"</span>\n<span class=\"token directive-block tag\"><span class=\"token directive-block tag\"><span class=\"token punctuation\">&lt;/</span>IfModule</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token comment\"># En-t√™tes</span>\n<span class=\"token directive-inline property\">Header</span> unset ETag\n<span class=\"token directive-inline property\">FileETag</span> None\n\n<span class=\"token directive-block tag\"><span class=\"token directive-block tag\"><span class=\"token punctuation\">&lt;</span>ifModule</span><span class=\"token directive-block-parameter attr-value\"> mod_headers.c</span><span class=\"token punctuation\">></span></span>\n<span class=\"token directive-block tag\"><span class=\"token directive-block tag\"><span class=\"token punctuation\">&lt;</span>filesMatch</span><span class=\"token directive-block-parameter attr-value\"> <span class=\"token string\">\"\\.(ico|jpe?g|png|gif)$\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token directive-inline property\">Header</span> set Cache-Control <span class=\"token string\">\"public\"</span>\n<span class=\"token directive-block tag\"><span class=\"token directive-block tag\"><span class=\"token punctuation\">&lt;/</span>filesMatch</span><span class=\"token punctuation\">></span></span>\n<span class=\"token directive-block tag\"><span class=\"token directive-block tag\"><span class=\"token punctuation\">&lt;</span>filesMatch</span><span class=\"token directive-block-parameter attr-value\"> <span class=\"token string\">\"\\.(css)$\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token directive-inline property\">Header</span> set Cache-Control <span class=\"token string\">\"public\"</span>\n<span class=\"token directive-block tag\"><span class=\"token directive-block tag\"><span class=\"token punctuation\">&lt;/</span>filesMatch</span><span class=\"token punctuation\">></span></span>\n<span class=\"token directive-block tag\"><span class=\"token directive-block tag\"><span class=\"token punctuation\">&lt;</span>filesMatch</span><span class=\"token directive-block-parameter attr-value\"> <span class=\"token string\">\"\\.(js)$\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token directive-inline property\">Header</span> set Cache-Control <span class=\"token string\">\"private\"</span>\n<span class=\"token directive-block tag\"><span class=\"token directive-block tag\"><span class=\"token punctuation\">&lt;/</span>filesMatch</span><span class=\"token punctuation\">></span></span>\n<span class=\"token directive-block tag\"><span class=\"token directive-block tag\"><span class=\"token punctuation\">&lt;</span>filesMatch</span><span class=\"token directive-block-parameter attr-value\"> <span class=\"token string\">\"\\.(x?html?|php)$\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token directive-inline property\">Header</span> set Cache-Control <span class=\"token string\">\"private, must-revalidate\"</span>\n<span class=\"token directive-block tag\"><span class=\"token directive-block tag\"><span class=\"token punctuation\">&lt;/</span>filesMatch</span><span class=\"token punctuation\">></span></span>\n<span class=\"token directive-block tag\"><span class=\"token directive-block tag\"><span class=\"token punctuation\">&lt;/</span>ifModule</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token comment\"># Compressions des fichiers statiques</span>\n<span class=\"token directive-block tag\"><span class=\"token directive-block tag\"><span class=\"token punctuation\">&lt;</span>IfModule</span><span class=\"token directive-block-parameter attr-value\"> mod_deflate.c</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token directive-inline property\">AddOutputFilterByType</span> DEFLATE text/xhtml text/html text/plain text/xml text/javascript application/x-javascript text/css\n    <span class=\"token directive-inline property\">BrowserMatch</span> <span class=\"token regex\">^Mozilla/4 gzip-only-text/html</span>\n    <span class=\"token directive-inline property\">BrowserMatch</span> <span class=\"token regex\">^Mozilla/4\\.0</span><span class=\"token directive-flags keyword\">[678]</span> no-gzip\n    <span class=\"token directive-inline property\">BrowserMatch</span> \\bMSIE !no-gzip !gzip-only-text/html\n    <span class=\"token directive-inline property\">SetEnvIfNoCase</span><span class=\"token regex\"> Request_URI \\.(?:gif|jpe?g|png)$</span> no-gzip dont-vary\n    <span class=\"token directive-inline property\">Header</span> append Vary User-Agent env=!dont-vary\n<span class=\"token directive-block tag\"><span class=\"token directive-block tag\"><span class=\"token punctuation\">&lt;/</span>IfModule</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token directive-inline property\">AddOutputFilterByType</span> DEFLATE text/html\n<span class=\"token directive-inline property\">AddOutputFilterByType</span> DEFLATE text/plain\n<span class=\"token directive-inline property\">AddOutputFilterByType</span> DEFLATE text/xml\n<span class=\"token directive-inline property\">AddOutputFilterByType</span> DEFLATE text/css\n<span class=\"token directive-inline property\">AddOutputFilterByType</span> DEFLATE text/javascript\n<span class=\"token directive-inline property\">AddOutputFilterByType</span> DEFLATE font/opentype\n<span class=\"token directive-inline property\">AddOutputFilterByType</span> DEFLATE application/rss+xml\n<span class=\"token directive-inline property\">AddOutputFilterByType</span> DEFLATE application/javascript\n<span class=\"token directive-inline property\">AddOutputFilterByType</span> DEFLATE application/json</code></pre></div>\n<h2 id=\"principe-de-validation\" style=\"position:relative;\"><a href=\"#principe-de-validation\" aria-label=\"principe de validation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Principe de validation</h2>\n<table>\n<thead>\n<tr>\n<th>Le nombre</th>\n<th align=\"center\">est inf√©rieur ou √©gal √†</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>d'√©lements durables non mis en cache</td>\n<td align=\"center\">0</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"source\" style=\"position:relative;\"><a href=\"#source\" aria-label=\"source permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source</h2>\n<ul>\n<li><a href=\"https://www.seomix.fr/guide-htaccess-performances-et-temps-de-chargement/\">https://www.seomix.fr/guide-htaccess-performances-et-temps-de-chargement/</a></li>\n</ul>","rawMarkdownBody":"\n## Sujet\n\nLa fiche [Utiliser un syst√®me Cache](./WP_7.02-utiliser-un-systeme-de-cache.md) nous parle de l'importance du [[cache]] et de sa mise en place via des [[extension|extensions]] WordPress.\n\n## GreenIT vous conseille\n\n### Solution code üå±üå±üå±\n\nNous allons directement indiquer au serveur Apache les param√©trages de [[compression]] et de contr√¥le du cache que nous souhaitons.\n\n## Exemple\n\nPrenons pour exemple l'image du logo qui se trouve sur chaque page du site. Si nous ne mettons pas en place de cache, le navigateur la transf√©rera depuis notre serveur √† chaque affichage d'une nouvelle page.\n\nMaintenant, compressons notre image (gzip), elle est d√©j√† plus rapide √† charger (bien s√ªr, nous partons du principe qu'elle est bien dimensionn√©e, et au bon format. cf fiches [Utiliser une version d'image ayant taille coh√©rente avec son utilisation](./WP_5.02-utiliser-le-format-adequat-d_image.md), [Utiliser le format ad√©quat d'image](./WP_5.02-utiliser-le-format-adequat-d_image.md) et [Compresser les m√©dias](./WP_5.01-compresser-les-medias.md).\n\nEnsuite, indiquons que nous souhaitons qu'elle soit mise en cache pendant 1 an.\nLors de sa premi√®re visite, le logo est transf√©r√© pour l'afficher dans le navigateur. Le visiteur change de page, le navigateur regarde si l'image existe d√©j√† dans ses fichiers mis en cache : oui, alors il ne va pas la chercher sur le serveur.\n\n> ‚ö†Ô∏è Attention, toucher au fichier .htaccess peut provoquer des erreurs, sauvegardez et testez.\n\n```apacheconf\n<IfModule mod_expires.c>\nExpiresActive On\nExpiresDefault \"access plus 1 month\"\n#D√©lai de cache des fonts\nExpiresByType application/x-font-ttf \"access plus 1 month\"\n[...]\n#D√©lai de cache des Images\nExpiresByType image/jpg \"access plus 1 month\"\n[...]\n#D√©lai de cache des Autres m√©dias\nExpiresByType video/ogg \"access plus 1 month\"\n[...]\n#D√©lai de cache des Assets\nExpiresByType text/css \"access plus 6 month\"\nExpiresByType application/javascript \"access plus 6 month\"\n</IfModule>\n\n# En-t√™tes\nHeader unset ETag\nFileETag None\n\n<ifModule mod_headers.c>\n<filesMatch \"\\.(ico|jpe?g|png|gif)$\">\n    Header set Cache-Control \"public\"\n</filesMatch>\n<filesMatch \"\\.(css)$\">\n    Header set Cache-Control \"public\"\n</filesMatch>\n<filesMatch \"\\.(js)$\">\n    Header set Cache-Control \"private\"\n</filesMatch>\n<filesMatch \"\\.(x?html?|php)$\">\n    Header set Cache-Control \"private, must-revalidate\"\n</filesMatch>\n</ifModule>\n\n# Compressions des fichiers statiques\n<IfModule mod_deflate.c>\n    AddOutputFilterByType DEFLATE text/xhtml text/html text/plain text/xml text/javascript application/x-javascript text/css\n    BrowserMatch ^Mozilla/4 gzip-only-text/html\n    BrowserMatch ^Mozilla/4\\.0[678] no-gzip\n    BrowserMatch \\bMSIE !no-gzip !gzip-only-text/html\n    SetEnvIfNoCase Request_URI \\.(?:gif|jpe?g|png)$ no-gzip dont-vary\n    Header append Vary User-Agent env=!dont-vary\n</IfModule>\n\nAddOutputFilterByType DEFLATE text/html\nAddOutputFilterByType DEFLATE text/plain\nAddOutputFilterByType DEFLATE text/xml\nAddOutputFilterByType DEFLATE text/css\nAddOutputFilterByType DEFLATE text/javascript\nAddOutputFilterByType DEFLATE font/opentype\nAddOutputFilterByType DEFLATE application/rss+xml\nAddOutputFilterByType DEFLATE application/javascript\nAddOutputFilterByType DEFLATE application/json\n```\n\n## Principe de validation\n\n| Le nombre                            | est inf√©rieur ou √©gal √† |\n| ------------------------------------ | :---------------------: |\n| d'√©lements durables non mis en cache |            0            |\n\n## Source\n\n- <https://www.seomix.fr/guide-htaccess-performances-et-temps-de-chargement/>\n","excerpt":"Sujet GreenIT vous conseille Solution code üå±üå±üå± Exemple Prenons pour exemple l'image du logo qui se trouve sur chaque page du site. Si‚Ä¶","timeToRead":3,"tableOfContents":"<ul>\n<li>\n<p><a href=\"#sujet\">Sujet</a></p>\n</li>\n<li>\n<p><a href=\"#greenit-vous-conseille\">GreenIT vous conseille</a></p>\n<ul>\n<li><a href=\"#solution-code-\">Solution code üå±üå±üå±</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#exemple\">Exemple</a></p>\n</li>\n<li>\n<p><a href=\"#principe-de-validation\">Principe de validation</a></p>\n</li>\n<li>\n<p><a href=\"#source\">Source</a></p>\n</li>\n</ul>","frontmatter":{"title":"7.01 Ajouter les √©l√©ments de caching dans le .htaccess","lifecycle":"Mise en ligne","environmental_impact":"Fort üå±üå±üå±","scope":"Cache","people":"Dominique N.","priority_implementation":"Fort üëçüëçüëç","saved_resources":["Processeur","M√©moire vive","Stockage","R√©seau","Requ√™tes"],"responsible":["Code(use¬∑ur) ‚Üí D√©veloppeu¬∑se¬∑r"]}},"file":{"id":"646813a6-2a0b-5c7a-8b3f-ec7b08afb909"},"previous":{"frontmatter":{"title":"6.01 Mesurer l'impact environnemental","path":"/fiches/WP_6.01-mesurer-l_impact-environnemental"}},"next":{"frontmatter":{"title":"7.02 Utiliser un syst√®me de cache","path":"/fiches/WP_7.02-utiliser-un-systeme-de-cache"}}},"pageContext":{"id":"646813a6-2a0b-5c7a-8b3f-ec7b08afb909","remarkID":"f4828861-6af8-5d33-a42f-38351c557872","type":"fiches","previousPostId":"518ab941-1133-54b3-b390-beb2c6649748","nextPostId":"d652aa62-f6e7-5611-bc5b-39c877c1a990"}},"staticQueryHashes":["2893162066","394120871"]}